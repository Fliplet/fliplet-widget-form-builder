{{! File upload field with drag-and-drop, file preview, and removal functionality }}
<div class="form-group fileUpload file-input" :class="{ 'fileUpload-padding-top': value.length, 'fileUpload-disabled' : readonly }" role="group" :aria-label="'File upload for ' + (label || 'file attachment')">
  <div class="row" v-if="value.length">
    <ul class="file-holder" :class="{ 'editable' : !readonly }" role="list" aria-label="Uploaded files">
      <li class="file-item" v-for="(file, index) in value" role="listitem">
        <div 
          @click="readonly ? false : onFileItemClick(file.url)" 
          class="file-content" 
          :class="{ 'no-pointer-events' : !file.url }"
          :aria-label="'File: ' + file.name + ', Size: ' + humanFileSize(file.size)"
          tabindex="0"
          @keydown="handleFileKeyDown($event, file, index)"
        >
          <div class="file-title">\{{ file.name }}</div>
          <div class="file-info">
            <span class="file-info-uploaded">
              <span v-if="file.createdAt">{{T "widgets.form.file.uploaded"}}: <strong>\{{ showLocalDateFormat(file.createdAt) }}</strong></span>
              <span v-else>{{T "widgets.form.file.uploadMessage"}}</span>
            </span>
            <span v-show="file.size" class="file-info-size">&ndash; <strong>\{{ humanFileSize(file.size) }}</strong></span>
          </div>
        </div>
        <div 
          class="file-icon" 
          @click="readonly ? false : removeFile(index)"
          :aria-label="'Remove file ' + file.name"
          tabindex="0"
          @keydown="handleRemoveKeyDown($event, index)"
          v-if="!readonly"
        >
          <i class="fa fa-times" aria-hidden="true"></i>
        </div>
      </li>
    </ul>
  </div>
  
  <label 
    class="btn btn-primary focus-outline" 
    tabindex="0" 
    :aria-label="_ariaLabel + ' - Select files to upload'"
    :aria-describedby="_ariaDescribedBy"
    :aria-invalid="_ariaInvalid"
    :disabled="readonly"
    v-on:keydown.space.prevent="readonly ? false : openFileDialog()"
    v-on:keydown.enter.prevent="readonly ? false : openFileDialog()"
  >
    <i class="fa fa-plus" :class="{ 'hidden' : readonly }" aria-hidden="true"></i>
    <span>{{T "widgets.form.file.instruction"}}</span>
    <input 
      type="file" 
      ref="fileInput" 
      :id="name" 
      :name="name" 
      :data-folder-id="mediaFolderId" 
      class="input-file selectfile" 
      :class="{ 'hidden' : readonly }" 
      v-on:change="updateValue($event)" 
      multiple 
      tabindex="-1" 
      :accept="accept"
      :aria-label="_ariaLabel + ' - File input'"
      :disabled="readonly"
    >
  </label>
  
  <div v-if="value.length > 0" class="file-summary" role="status" aria-live="polite">
    <span class="sr-only">Files uploaded: </span>
    <span class="summary-text">\{{ value.length }} file\{{ value.length !== 1 ? 's' : '' }} selected</span>
  </div>
</div>

<p class="text-danger" v-if="$v.value.required === false && $v.value.$dirty" role="alert" aria-live="assertive">
  {{T "widgets.form.errors.required"}}
</p>
