<template>
  <button class="scanner btn btn-primary focus-outline" :class="{'disabled': readonly}" @click.prevent="openScanner">
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
      <path d="M22 0.916667V5.5C22 5.74312 21.9034 5.97627 21.7315 6.14818C21.5596 6.32009 21.3264 6.41667 21.0833 6.41667C20.8402 6.41667 20.6071 6.32009 20.4352 6.14818C20.2632 5.97627 20.1667 5.74312 20.1667 5.5V1.83333H16.5C16.2569 1.83333 16.0237 1.73676 15.8518 1.56485C15.6799 1.39294 15.5833 1.15978 15.5833 0.916667C15.5833 0.673552 15.6799 0.440394 15.8518 0.268486C16.0237 0.0965773 16.2569 0 16.5 0H21.0833C21.3264 0 21.5596 0.0965773 21.7315 0.268486C21.9034 0.440394 22 0.673552 22 0.916667ZM5.5 20.1667H1.83333V16.5C1.83333 16.2569 1.73676 16.0237 1.56485 15.8518C1.39294 15.6799 1.15978 15.5833 0.916667 15.5833C0.673552 15.5833 0.440394 15.6799 0.268486 15.8518C0.0965773 16.0237 0 16.2569 0 16.5V21.0833C0 21.3264 0.0965773 21.5596 0.268486 21.7315C0.440394 21.9034 0.673552 22 0.916667 22H5.5C5.74312 22 5.97627 21.9034 6.14818 21.7315C6.32009 21.5596 6.41667 21.3264 6.41667 21.0833C6.41667 20.8402 6.32009 20.6071 6.14818 20.4352C5.97627 20.2632 5.74312 20.1667 5.5 20.1667ZM21.0833 15.5833C20.8402 15.5833 20.6071 15.6799 20.4352 15.8518C20.2632 16.0237 20.1667 16.2569 20.1667 16.5V20.1667H16.5C16.2569 20.1667 16.0237 20.2632 15.8518 20.4352C15.6799 20.6071 15.5833 20.8402 15.5833 21.0833C15.5833 21.3264 15.6799 21.5596 15.8518 21.7315C16.0237 21.9034 16.2569 22 16.5 22H21.0833C21.3264 22 21.5596 21.9034 21.7315 21.7315C21.9034 21.5596 22 21.3264 22 21.0833V16.5C22 16.2569 21.9034 16.0237 21.7315 15.8518C21.5596 15.6799 21.3264 15.5833 21.0833 15.5833ZM0.916667 6.41667C1.15978 6.41667 1.39294 6.32009 1.56485 6.14818C1.73676 5.97627 1.83333 5.74312 1.83333 5.5V1.83333H5.5C5.74312 1.83333 5.97627 1.73676 6.14818 1.56485C6.32009 1.39294 6.41667 1.15978 6.41667 0.916667C6.41667 0.673552 6.32009 0.440394 6.14818 0.268486C5.97627 0.0965773 5.74312 0 5.5 0H0.916667C0.673552 0 0.440394 0.0965773 0.268486 0.268486C0.0965773 0.440394 0 0.673552 0 0.916667V5.5C0 5.74312 0.0965773 5.97627 0.268486 6.14818C0.440394 6.32009 0.673552 6.41667 0.916667 6.41667ZM17.4167 15.5833V6.41667C17.4167 5.93044 17.2235 5.46412 16.8797 5.1203C16.5359 4.77649 16.0696 4.58333 15.5833 4.58333H6.41667C5.93044 4.58333 5.46412 4.77649 5.1203 5.1203C4.77649 5.46412 4.58333 5.93044 4.58333 6.41667V15.5833C4.58333 16.0696 4.77649 16.5359 5.1203 16.8797C5.46412 17.2235 5.93044 17.4167 6.41667 17.4167H15.5833C16.0696 17.4167 16.5359 17.2235 16.8797 16.8797C17.2235 16.5359 17.4167 16.0696 17.4167 15.5833Z" fill="white"/>
    </svg>
    {{T "widgets.form.codeScanner.scanCode"}}
  </button>
  <textarea
    class="form-control focus-outline"
    v-model.trim.lazy="$v.value.$model"
    rows="1"
    :id="name"
    :placeholder="placeholder"
    :readonly="readonly"
    @blur="onBlur()"
    @input="scannerInput($event)"
  />
  <p class="text-danger" v-if="$v.value.required === false && $v.value.$dirty">
    {{T "widgets.form.errors.required"}}
  </p>
  <p v-if="errorMessage" class="text-danger">\{{errorMessage}}</p>
</template>